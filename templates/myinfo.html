{% extends "base.html" %}
{% block content %}
    {% if session.user != "systemadmin" %}
    <aside id="profileImage">
        {% endif %}
        <div class="row">
            {% for users in users %}
            <div class="col s12 m8 offset-m2 profileHeader">
                {% if session.user != "systemadmin" %}
                <!-- Username heading -->
                <h3 class="center-align">
                    Hey " {{ users.name }} "
                </h3>
                {% else %}
                <!-- Username heading -->
                <h3 class="center-align">
                    Hello Admin &nbsp;<i class="far fa-id-badge fa-lg" style="color: #399905;"></i>
                </h3>
                {% endif %}
                <aside class="container flash">
                    <!-- flash messages -->
                    {% with messages = get_flashed_messages() %}
                    {% if messages %}
                    {% for message in messages %}
                    <div class="row flashes ">
                        <div class="col s12 center errorFlash">
                            <b><h6 class="red-text text-accent-4" style="font-size: x-large; font-weight: 700; letter-spacing: 3px;">{{ message }}</h6></b>
                        </div>
                    </div>
                    {% endfor %}
                    {% endif %}
                    {% endwith %}
                </aside>
            </div>
            
        </div>
        <br>
        <br>
        <div class="container page-container">
            <div class="row">
                <div class="col s12 m8 offset-m2 card-panel custom-card travel-card" style="background-color:rgba(255, 228, 196, 0.651);">
                    {% if username == "systemadmin" %}
                    <div class="row">
                        <div class="col s12 ">
                            <h5><span> Created by:</span></h5>
                            <h5>{{ users.name }}</h5>
                        </div>
                    </div>
                    {% endif %}
                    <div class="row">
                        <div class="col s12">
                            <div class="row">
                                <div class="col s12 m6">
                                    <h5  style="font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif; font-weight: bold;">Name  :</h5>
                                </div>
                                <div class="col s12 m6">
                                    <h5 style="font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">{{ users.name }}</h5>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col s12 m6">
                                    <h5  style="font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif; font-weight: bold;">Username   :</h5> 
                                </div>
                                <div class="col s12 m6">
                                    <h5 style="font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">{{ users.username }}</h5>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col s12 m6">
                                    <h5  style="font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif; font-weight: bold;">Phone Number  :</h5> 
                                </div>
                                <div class="col s12 m6">
                                    <h5  style="font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">{{users.number }}</h5>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col s12 m6">
                                    <h5  style="font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif; font-weight: bold;">E-mail  :</h5>
                                </div>
                                <div class="col s12 m6">
                                    <h5  style="font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">{{users.email}}</h5>
                                </div>
                            </div>
                        </div>  
                    </div>
                    <br>
                    <br>
                    <!--Buttons-->
                    <!-- Edit button -->
                    
                    <div class="row">
                        <div class="col s12 m4">
                            <a href="{{ url_for('profile', username=session['user']) }}"
                                class="btn icon-left waves-effect waves-light teal darken-4 white-text text-lighten-4"><i
                                    class="material-icons">arrow_back</i><small>Back to Dashboard</small></a>
                            <a href="{{ url_for('update', users_id=users._id) }}"
                                class="btn icon-left waves-effect waves-light blue lighten-2 white-text text-lighten-4">
                                    <i class="material-icons">edit</i><small>Update</small></a>
                        </div>
                        {% if session.user != "systemadmin" %}
                        <div class="col s12 m8 right-align">
                            <!-- Delete button -->
                            <a class="waves-effect waves-light btn modal-trigger red darken-4 rounded" href="#deleteModal"><span class="material-symbols-outlined right-align"><small>Delete</small></span></a>
                        </div>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
            </div>
            <!-- Delete Modal -->
            <div id="deleteModal" class="modal card-panel rounded white-text center p-5">
                <!-- Modal Content -->
                <div class="modal-content rounded">
                    <div class="row">
                        <div class="col s12 red-text text-darken-4">
                            <i class="fa-solid fa-triangle-exclamation fa-lg"></i>
                            <h4>Caution</h4>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col s12 black-text">
                            <p> Deleting this user will erase all associated data. Are you sure you want to proceed?
                                Click
                                below to confirm or cancel to preserve data.</p>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="row">
                        <div class="col s12 center">
                            <!-- Delete button -->
                            <form action="" method="POST">
                                <button class="modal-close btn waves-effect rounded red darken-4 m-2">Delete</button>
                                <!-- Cancel button -->
                                <a href="#" class="modal-close btn waves-effect rounded orange m-2">Cancel</a>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% if session.user != "systemadmin" %}
    </aside>
    {% endif %}
{% endblock %}
<!-- Script tags -->
{% block javascript %}

<script>
    document.addEventListener("DOMContentLoaded", () => {
        displayCard();
    });

    function displayCard() {
        const Properties = document.querySelectorAll(".travel-card");

        if (Properties.length == 0) {
            noCardDisplayCard.style.display = "block";
        } else {
            noCardDisplayCard.style.display = "none";

        }
    }
</script>

{% endblock %}